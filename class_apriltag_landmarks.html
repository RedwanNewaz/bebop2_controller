<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>airlib: ApriltagLandmarks Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">airlib
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="class_apriltag_landmarks-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ApriltagLandmarks Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_apriltag_landmarks_8h_source.html">ApriltagLandmarks.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ApriltagLandmarks:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_apriltag_landmarks.png" usemap="#ApriltagLandmarks_map" alt=""/>
  <map id="ApriltagLandmarks_map" name="ApriltagLandmarks_map">
<area href="class_sensor_base.html" alt="SensorBase" shape="rect" coords="0,56,268,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9e32395a2cd0485d753fb0979ef8ed68"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apriltag_landmarks.html#a9e32395a2cd0485d753fb0979ef8ed68">ApriltagLandmarks</a> (ros::NodeHandle &amp;nh)</td></tr>
<tr class="memdesc:a9e32395a2cd0485d753fb0979ef8ed68"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class compute the robot coordinate from stationary tags. There are three stationary apriltags located on the wall. These tags are treated as known landmarks for the map. Bebop2 can view these tags with the front facing camera. It is not necessary to see all the tags even one landmark can help to localize the robot. This information is feedback to the computer to detect apriltags from the camera image. Bebop2 can transmit this images upto 28 Hz speed Apprantly, the tags are located only front direction, therefore robot yaw angle is ignored.  <br /></td></tr>
<tr class="separator:a9e32395a2cd0485d753fb0979ef8ed68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11f9b912b3f326faa40eccc67e3ba7b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apriltag_landmarks.html#a11f9b912b3f326faa40eccc67e3ba7b2">operator()</a> (std::vector&lt; double &gt; &amp;result)</td></tr>
<tr class="memdesc:a11f9b912b3f326faa40eccc67e3ba7b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is an interface to access to the internal state vector so that other modules can do their computation.  <br /></td></tr>
<tr class="separator:a11f9b912b3f326faa40eccc67e3ba7b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb855b900e2500bd2cb7b832b6a06d5d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apriltag_landmarks.html#adb855b900e2500bd2cb7b832b6a06d5d">empty</a> ()</td></tr>
<tr class="memdesc:adb855b900e2500bd2cb7b832b6a06d5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is an interface to check whether internal state vector is empty or not so that we can safely read internal state vector.  <br /></td></tr>
<tr class="separator:adb855b900e2500bd2cb7b832b6a06d5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_sensor_base"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_sensor_base')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_sensor_base.html">SensorBase</a></td></tr>
<tr class="memitem:aacd7a71d84767414807a14b34a5ad7c6 inherit pub_methods_class_sensor_base"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_sensor_base_8h.html#ae79ed385e2ca22ae255892167db2390c">SensorPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sensor_base.html#aacd7a71d84767414807a14b34a5ad7c6">getPtr</a> ()</td></tr>
<tr class="memdesc:aacd7a71d84767414807a14b34a5ad7c6 inherit pub_methods_class_sensor_base"><td class="mdescLeft">&#160;</td><td class="mdescRight">systematic way to share SensorPtr to control class  <br /></td></tr>
<tr class="separator:aacd7a71d84767414807a14b34a5ad7c6 inherit pub_methods_class_sensor_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae77f79abe25a2939434e30575ea5fd30 inherit pub_methods_class_sensor_base"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sensor_base.html#ae77f79abe25a2939434e30575ea5fd30">operator()</a> (std::vector&lt; double &gt; &amp;result)=0</td></tr>
<tr class="memdesc:ae77f79abe25a2939434e30575ea5fd30 inherit pub_methods_class_sensor_base"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is an interface to access to the internal state vector so that other modules can do their computation.  <br /></td></tr>
<tr class="separator:ae77f79abe25a2939434e30575ea5fd30 inherit pub_methods_class_sensor_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f481426253035b3a39162d107f52a38 inherit pub_methods_class_sensor_base"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sensor_base.html#a4f481426253035b3a39162d107f52a38">empty</a> ()=0</td></tr>
<tr class="memdesc:a4f481426253035b3a39162d107f52a38 inherit pub_methods_class_sensor_base"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is an interface to check whether internal state vector is empty or not so that we can safely read internal state vector.  <br /></td></tr>
<tr class="separator:a4f481426253035b3a39162d107f52a38 inherit pub_methods_class_sensor_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad56a833e43ba1c3c10cbf52024390e44 inherit pub_methods_class_sensor_base"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sensor_base.html#ad56a833e43ba1c3c10cbf52024390e44">publish_tf</a> (const std::vector&lt; double &gt; &amp;state)</td></tr>
<tr class="memdesc:ad56a833e43ba1c3c10cbf52024390e44 inherit pub_methods_class_sensor_base"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish robot transformation so that we can visualize it in RVIZ. <br  />
 tf::TransformBroadcaster m_br; variable does not depends of NodeHandle. Therefore we can implement publish_tf in this abstract class.  <br /></td></tr>
<tr class="separator:ad56a833e43ba1c3c10cbf52024390e44 inherit pub_methods_class_sensor_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ace7326fcc563193fabaa2e4e0a92d271"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apriltag_landmarks.html#ace7326fcc563193fabaa2e4e0a92d271">apriltag_callback</a> (const apriltag_ros::AprilTagDetectionArray::ConstPtr &amp;msg)</td></tr>
<tr class="memdesc:ace7326fcc563193fabaa2e4e0a92d271"><td class="mdescLeft">&#160;</td><td class="mdescRight">given a array of detected tags, here we calculate robot global coordinate with respect to each tag. Each tag propose a noisy state of the robot when transformed it to the global frame. Therefore, an appropriate state filter is used to denoise those readings and compute the robot state accurately.  <br /></td></tr>
<tr class="separator:ace7326fcc563193fabaa2e4e0a92d271"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1fedc5c1e5d0bba0ddfbd881269df99"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_field_location.html">FieldLocation</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apriltag_landmarks.html#ae1fedc5c1e5d0bba0ddfbd881269df99">transformToGlobalFrame</a> (const tf::Transform &amp;tagTransform, const std::string &amp;tagName)</td></tr>
<tr class="memdesc:ae1fedc5c1e5d0bba0ddfbd881269df99"><td class="mdescLeft">&#160;</td><td class="mdescRight">tag is detected with respect to camera frame which needs to be transformed to global frame through camera baselink -&gt; global_frame  <br /></td></tr>
<tr class="separator:ae1fedc5c1e5d0bba0ddfbd881269df99"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="_apriltag_landmarks_8h_source.html#l00018">18</a> of file <a class="el" href="_apriltag_landmarks_8h_source.html">ApriltagLandmarks.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a9e32395a2cd0485d753fb0979ef8ed68" name="a9e32395a2cd0485d753fb0979ef8ed68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e32395a2cd0485d753fb0979ef8ed68">&#9670;&#160;</a></span>ApriltagLandmarks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ApriltagLandmarks::ApriltagLandmarks </td>
          <td>(</td>
          <td class="paramtype">ros::NodeHandle &amp;&#160;</td>
          <td class="paramname"><em>nh</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This class compute the robot coordinate from stationary tags. There are three stationary apriltags located on the wall. These tags are treated as known landmarks for the map. Bebop2 can view these tags with the front facing camera. It is not necessary to see all the tags even one landmark can help to localize the robot. This information is feedback to the computer to detect apriltags from the camera image. Bebop2 can transmit this images upto 28 Hz speed Apprantly, the tags are located only front direction, therefore robot yaw angle is ignored. </p>

<p class="definition">Definition at line <a class="el" href="_apriltag_landmarks_8cpp_source.html#l00007">7</a> of file <a class="el" href="_apriltag_landmarks_8cpp_source.html">ApriltagLandmarks.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ace7326fcc563193fabaa2e4e0a92d271" name="ace7326fcc563193fabaa2e4e0a92d271"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace7326fcc563193fabaa2e4e0a92d271">&#9670;&#160;</a></span>apriltag_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ApriltagLandmarks::apriltag_callback </td>
          <td>(</td>
          <td class="paramtype">const apriltag_ros::AprilTagDetectionArray::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>given a array of detected tags, here we calculate robot global coordinate with respect to each tag. Each tag propose a noisy state of the robot when transformed it to the global frame. Therefore, an appropriate state filter is used to denoise those readings and compute the robot state accurately. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>an array of detected tags </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_apriltag_landmarks_8cpp_source.html#l00029">29</a> of file <a class="el" href="_apriltag_landmarks_8cpp_source.html">ApriltagLandmarks.cpp</a>.</p>

</div>
</div>
<a id="adb855b900e2500bd2cb7b832b6a06d5d" name="adb855b900e2500bd2cb7b832b6a06d5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb855b900e2500bd2cb7b832b6a06d5d">&#9670;&#160;</a></span>empty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ApriltagLandmarks::empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is an interface to check whether internal state vector is empty or not so that we can safely read internal state vector. </p>
<dl class="section return"><dt>Returns</dt><dd>true if internal state vector has not been populated yet </dd>
<dd>
false if internal state vector has been initialized </dd></dl>
<dl class="section note"><dt>Note</dt><dd>previous void <a class="el" href="class_apriltag_landmarks.html#a11f9b912b3f326faa40eccc67e3ba7b2" title="This is an interface to access to the internal state vector so that other modules can do their comput...">operator()(std::vector&lt;double&gt;&amp; result)</a> depends on it </dd></dl>

<p>Implements <a class="el" href="class_sensor_base.html#a4f481426253035b3a39162d107f52a38">SensorBase</a>.</p>

<p class="definition">Definition at line <a class="el" href="_apriltag_landmarks_8cpp_source.html#l00068">68</a> of file <a class="el" href="_apriltag_landmarks_8cpp_source.html">ApriltagLandmarks.cpp</a>.</p>

</div>
</div>
<a id="a11f9b912b3f326faa40eccc67e3ba7b2" name="a11f9b912b3f326faa40eccc67e3ba7b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11f9b912b3f326faa40eccc67e3ba7b2">&#9670;&#160;</a></span>operator()()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ApriltagLandmarks::operator() </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is an interface to access to the internal state vector so that other modules can do their computation. </p>
<dl class="section note"><dt>Note</dt><dd>this interface depends on bool <a class="el" href="class_apriltag_landmarks.html#adb855b900e2500bd2cb7b832b6a06d5d" title="This is an interface to check whether internal state vector is empty or not so that we can safely rea...">empty()</a> <br  />
 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">result</td><td>copy internal state vector to result vector </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="class_sensor_base.html#ae77f79abe25a2939434e30575ea5fd30">SensorBase</a>.</p>

<p class="definition">Definition at line <a class="el" href="_apriltag_landmarks_8cpp_source.html#l00063">63</a> of file <a class="el" href="_apriltag_landmarks_8cpp_source.html">ApriltagLandmarks.cpp</a>.</p>

</div>
</div>
<a id="ae1fedc5c1e5d0bba0ddfbd881269df99" name="ae1fedc5c1e5d0bba0ddfbd881269df99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1fedc5c1e5d0bba0ddfbd881269df99">&#9670;&#160;</a></span>transformToGlobalFrame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_field_location.html">FieldLocation</a> ApriltagLandmarks::transformToGlobalFrame </td>
          <td>(</td>
          <td class="paramtype">const tf::Transform &amp;&#160;</td>
          <td class="paramname"><em>tagTransform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>tagName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>tag is detected with respect to camera frame which needs to be transformed to global frame through camera baselink -&gt; global_frame </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tagTransform</td><td>tag pose with resect to camera frame </td></tr>
    <tr><td class="paramname">tagName</td><td>name of the tag </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>global coordinate [x, y, z] </dd></dl>

<p class="definition">Definition at line <a class="el" href="_apriltag_landmarks_8cpp_source.html#l00046">46</a> of file <a class="el" href="_apriltag_landmarks_8cpp_source.html">ApriltagLandmarks.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/airlib/localization/Sensors/<a class="el" href="_apriltag_landmarks_8h_source.html">ApriltagLandmarks.h</a></li>
<li>airlib/localization/Sensors/<a class="el" href="_apriltag_landmarks_8cpp_source.html">ApriltagLandmarks.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
